[package]
name = "dbsurveyor-collect"
description = "Database metadata collector for dbsurveyor toolchain"
categories = ["database", "command-line-utilities"]
keywords = ["database", "schema", "metadata", "red-team", "security"]

version.workspace = true
edition.workspace = true
rust-version.workspace = true
authors.workspace = true
license.workspace = true
repository.workspace = true

[[bin]]
name = "dbsurveyor-collect"
path = "src/main.rs"

[dependencies]
# Core shared library
dbsurveyor-core = { workspace = true }

# CLI and async
clap = { workspace = true }
tokio = { workspace = true }
tracing = { workspace = true }
tracing-subscriber = { workspace = true }
anyhow = { workspace = true }

# Secure credential handling
rpassword = "7.3"
is-terminal = "0.4"

# Database drivers (feature-gated)
# Note: MySQL support completely disabled to prevent RSA vulnerability (RUSTSEC-2023-0071)
# SQLx with minimal features - specific database support added via feature flags only
sqlx = { version = "0.8", features = ["runtime-tokio-native-tls"], optional = true }
mongodb = { version = "3.2", optional = true }
tiberius = { version = "0.12", optional = true }

[dev-dependencies]
tempfile = "3.8"

[features]
# Note: mysql feature completely disabled to prevent RSA vulnerability (RUSTSEC-2023-0071)
# Default features only include secure database drivers
default = ["postgresql", "sqlite", "mongodb"]
postgresql = ["dep:sqlx", "sqlx/postgres"]
sqlite = ["dep:sqlx", "sqlx/sqlite"]
# mysql feature intentionally commented out to prevent accidental inclusion
# mysql = ["dep:sqlx", "sqlx/mysql"]
mssql = ["tiberius"]
mongodb = ["dep:mongodb"]

[lints]
workspace = true
