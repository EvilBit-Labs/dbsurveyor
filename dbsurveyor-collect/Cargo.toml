[package]
name = "dbsurveyor-collect"
description = "Database metadata collector for dbsurveyor toolchain"
categories = ["database", "command-line-utilities"]
keywords = ["database", "schema", "metadata", "red-team", "security"]

version.workspace = true
edition.workspace = true
rust-version.workspace = true
authors.workspace = true
license.workspace = true
repository.workspace = true

[[bin]]
name = "dbsurveyor-collect"
path = "src/main.rs"

[dependencies]
# Core shared library
dbsurveyor-core = { workspace = true }

# CLI and async
clap = { workspace = true }
tokio = { workspace = true }
tracing = { workspace = true }
tracing-subscriber = { workspace = true }
anyhow = { workspace = true }

# Secure credential handling
rpassword = "7.3"
atty = "0.2"

# Database drivers (feature-gated)
sqlx = { version = "0.8", features = ["runtime-tokio-rustls"], optional = true }
mongodb = { version = "3.2", optional = true }
tiberius = { version = "0.12", optional = true }

[dev-dependencies]
tempfile = "3.8"

[features]
default = ["postgresql", "mysql", "sqlite", "mongodb"]
postgresql = ["sqlx/postgres"]
mysql = ["sqlx/mysql"]
sqlite = ["sqlx/sqlite"]
mssql = ["tiberius"]
mongodb = ["dep:mongodb"]

[lints]
workspace = true
